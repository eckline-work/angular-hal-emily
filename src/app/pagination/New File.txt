Mssg Viewer pseudo-code

if #open == 0
  clicked => opened
  #open = 1

else if #open == 1
  if clicked == open
    clicked => closed
    #open = 0
  else
    clicked => opened
    #open = 2

else (#open == 2
  if clicked == open
    clicked => closed
    #open = 1
  else
    older => closed
    clicked => opened
    #open = 2

